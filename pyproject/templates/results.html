{% extends 'layout.html' %}
{% block content %}
<hr>
<div class="wrapper cont">
<h3 align="center"><superscript>Pageinsights Analysis</superscript></h3>
<hr>
<br>

<hr>
<div align="center" class="baseinfocont">
    <h5 align="center">BASE INFORMATION</h5> 
    <caption>{{analyzedurl}}</caption>
    <br>
    Captcha status :  {{captcha}}<br>
    <small>Timestamp      :  {{timestamp}}</small>
    <br>
</div>
<hr>
<div align="center" class="lighthouseResultcont">
    <!-- url redirections information -->
    <h5>URL INFO</h5> 
    Initial Url :&nbsp&nbsp&nbsp&nbsp<a href="{{lighthouseResult["requestedUrl"]}}">{{lighthouseResult["requestedUrl"]}}</a>
    <br>
    Final Url :&nbsp&nbsp&nbsp&nbsp<a href="{{lighthouseResult["finalUrl"]}}">{{lighthouseResult["finalUrl"]}}</a>
    <hr>
    <br>    
</div>
<div align="center" class="previewcont">
    <!-- usage of iframe in preview of the analyzed site  -->
    <h5 align="center">Preview (Available only for selected sites)</h5> 
    <iframe src="{{lighthouseResult["finalUrl"]}}" width="100%" height="300" title="preview">
    </iframe>
</div>
<hr>
<!-- iterating through different attributes of metrics in auditsdata -->
<div id="datasets">
        {% for key,value in auditsdata.items() %}
        <h5 align="center">{{key}} Analysis<br><br> 
                {% if value["score"] is not none %}   
                    <small><strong>Performance :  {{value["score"]*100}}%</strong></small> 
                {%endif %}      
        </h5> 
        <br>
        <!-- Display screenshots of the analyzed page -->

        {% if value['title']=="Full-page screenshot" : %}
        <div><img src="{{value["details"]["screenshot"]["data"]}}"" width="50%" height="300"></div>
        {% endif %}

        <!-- Display screenshots of the Final page -->
        {% if value['title']=="Final Screenshot" : %}
        <div><img src="{{value["details"]["data"]}}"" width="50%" height="300"></div>
        {% endif %}

        <!-- Display snapshots -->
        {% if value['title']=="Screenshot Thumbnails" : %}
        <div>
            <img src="{{value["details"]["items"][2]["data"]}}"" width="10%" height="100">
            <img src="{{value["details"]["items"][3]["data"]}}"" width="10%" height="100">
            <img src="{{value["details"]["items"][4]["data"]}}"" width="10%" height="100">  
            <br>  
        </div>
        {% endif %}
        

        <h6 align="center">&nbsp&nbsp&nbsp&nbsp {{value["title"]}}</h6>
        <br>
        <div align="left">Description :&nbsp&nbsp&nbsp&nbsp {{value["description"]}}</div>
        <br>
        <hr>
        {% endfor %}
    
 </div>
</div>

{% endblock content %}
